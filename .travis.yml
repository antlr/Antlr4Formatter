language: java

jdk:
  - oraclejdk8

install:
  - ./mvnw install -DskipTests=true -Dmaven.javadoc.skip=true --batch-mode --show-version

script:
  - ./mvnw test --batch-mode || true
  - curl -O -L https://github.com/codacy/codacy-coverage-reporter/releases/download/4.0.5/codacy-coverage-reporter-4.0.5-assembly.jar
  - java -jar codacy-coverage-reporter-4.0.5-assembly.jar report -l Java -r antlr4-formatter-coverage/target/site/jacoco-aggregate/jacoco.xml
